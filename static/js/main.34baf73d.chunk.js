(this.webpackJsonpstarlink=this.webpackJsonpstarlink||[]).push([[0],{122:function(e,t,a){e.exports=a.p+"static/media/Starlink_Logo.142c8c7f.svg"},129:function(e,t,a){e.exports=a.p+"static/media/satellite.07c6d561.svg"},143:function(e,t,a){e.exports=a(245)},148:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(7),o=a.n(s),i=(a(148),a(23)),c=a(24),l=a(26),m=a(25),u=a(122),h=a.n(u),d=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:h.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",{className:"title"},"StarLink Tracker"))}}]),a}(n.Component),g=a(136),f=a(94),p=a(46),v=a.n(p),b="https://www.n2yo.com/rest/v1/satellite",E="".concat(b,"/above"),w="".concat(b,"/positions"),L=a(260),S=a(257),j=a(261),y=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).onChangeLong=function(t){e.setState({observerLong:t})},e.onChangeLat=function(t){e.setState({observerLat:t})},e.onChangeEle=function(t){e.setState({observerElevation:t})},e.onChangeAlt=function(t){e.setState({satAlt:Number(90-+t)})},e.onDurationChange=function(t){e.setState({duration:t})},e.showSatellite=function(){e.props.onShow(e.state)},e.state={observerLat:0,observerLong:0,observerElevation:0,satAlt:90,duration:[0,90],isLoading:!1},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"sat-setting"},r.a.createElement("div",{className:"loc-setting"},r.a.createElement("p",{className:"setting-label"},"From Location"),r.a.createElement("div",{className:"setting-list two-item-col"},r.a.createElement("div",{className:"list-item"},r.a.createElement("label",null,"Longitude: "),r.a.createElement(L.a,{min:-180,max:180,defaultValue:0,style:{margin:"0 2px"},onChange:this.onChangeLong})),r.a.createElement("div",{className:"list-item right-item"},r.a.createElement("label",null,"Latitude: "),r.a.createElement(L.a,{placeholder:"latitude",min:-90,max:90,defaultValue:0,style:{margin:"0 2px"},onChange:this.onChangeLat}))),r.a.createElement("div",{className:"setting-list"},r.a.createElement("div",{className:"list-item"},r.a.createElement("label",null,"Elevation(meters): "),r.a.createElement(L.a,{min:-413,max:8850,defaultValue:0,style:{margin:"0 2px"},onChange:this.onChangeEle})))),r.a.createElement("div",{className:"altitude-setting"},r.a.createElement("p",{className:"setting-label"},"Restrictions"),r.a.createElement("div",null,r.a.createElement("span",null,"Show only satellites which are higher than ",r.a.createElement("br",null)," altitude"),r.a.createElement(L.a,{min:0,max:90,defaultValue:0,style:{margin:"8px 2px 0"},onChange:this.onChangeAlt})," ",r.a.createElement("span",null,"degrees."))),r.a.createElement("div",{className:"duration-setting"},r.a.createElement("p",{className:"setting-label"},"Duration(sec)"),r.a.createElement(S.a,{className:"duration-slider",range:!0,step:1,defaultValue:[0,90],min:0,max:90,marks:{0:"0",89:"90"},onChange:this.onDurationChange})),r.a.createElement("div",{className:"show-nearby"},r.a.createElement(j.a,{className:"show-nearby-btn",size:"large",onClick:this.showSatellite},"Find Nearby Satellites")))}}]),a}(n.Component),N=a(130),O=a(255),k=a(262),C=a(252),x=a(129),D=a.n(x),M=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).onChange=function(t){var a=t.target,n=a.dataInfo,r=a.checked;console.log(t.target);var s=e.state.selected,o=e.addOrRemove(n,r,s);e.setState({selected:o})},e.addOrRemove=function(e,t,a){var n=a.some((function(t){return t.satid===e.satid}));return t&&!n&&a.push(e),!t&&n&&(a=a.filter((function(t){return console.log("entry -> ",t),t.satid!==e.satid}))),a},e.onShowSatMap=function(){console.log("track"),e.props.onShowMap(e.state.selected)},e.state={selected:[],isLoad:!1},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.satInfo?this.props.satInfo.above:[],a=this.props.isLoad,n=this.state.selected;return r.a.createElement("div",{className:"sat-list-box"},r.a.createElement(j.a,{className:"sat-list-btn",size:"large",disabled:0===n.length,onClick:this.onShowSatMap},"Track on the map"),r.a.createElement("hr",null),a?r.a.createElement("div",{className:"spin-box"},r.a.createElement(N.a,{tip:"Loading...",size:"large"})):r.a.createElement(O.a,{className:"sat-list",itemLayout:"horizontal",size:"small",dataSource:t,renderItem:function(t){return r.a.createElement(O.a.Item,{actions:[r.a.createElement(k.a,{dataInfo:t,onChange:e.onChange})]},r.a.createElement(O.a.Item.Meta,{avatar:r.a.createElement(C.a,{size:50,src:D.a}),title:r.a.createElement("p",null,t.satname),description:"Launch Date: ".concat(t.launchDate)}))}}))}}]),a}(n.Component),I=a(137),A=a(135),T=a(256),R=a(253),B=a(259),z=a(254),H=a(264),P=a(263),V=a(258),W=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).track=function(t){if(!t[0].hasOwnProperty("positions"))throw new Error("no position data");var a=t[0].positions.length,n=Object(I.a)(e.props.observerData.duration,2),r=n[0],s=(n[1],e.map.context2),o=new Date,i=r,c=setInterval((function(){var n=Date.now()-o;i===r&&o.setSeconds(o.getSeconds()+60*r);var l=new Date(o.getTime()+60*n);if(s.clearRect(0,0,960,600),s.font="bold 14px sans-serif",s.fillStyle="#333",s.textAlign="center",s.fillText(Object(V.a)(l),480,10),i>=a)return clearInterval(c),e.setState({isDrawing:!1}),void(document.getElementsByClassName("hint")[0].innerHTML="");t.forEach((function(t){var a=t.info,n=t.positions;e.drawSat(a,n[i])})),i+=60}),1e3)},e.drawSat=function(t,a){var n=a.satlongitude,r=a.satlatitude;if(n&&r){var s=t.satname.match(/\d+/g).join(""),o=e.map,i=o.projection,c=o.context2,l=i([n,r]);c.fillStyle=e.color(s),c.beginPath(),c.arc(l[0],l[1],4,0,2*Math.PI),c.fill(),c.font="bold 11px sans-serif",c.textAlign="center",c.fillText(s,l[0],l[1]+14)}},e.generateMap=function(t){var a=Object(T.a)().scale(170).translate([480,300]).precision(.1),n=Object(R.a)(),r=Object(z.a)(e.refMap.current).attr("width",960).attr("height",600),s=Object(z.a)(e.refTrack.current).attr("width",960).attr("height",600),o=r.node().getContext("2d"),i=s.node().getContext("2d"),c=Object(B.a)().projection(a).context(o);t.forEach((function(e){o.fillStyle="#B3DDEF",o.strokeStyle="#000",o.globalAlpha=.7,o.beginPath(),c(e),o.fill(),o.stroke(),o.strokeStyle="rgba(220, 220, 220, 0.1)",o.beginPath(),c(n()),o.lineWidth=.1,o.stroke(),o.beginPath(),o.lineWidth=.5,c(n.outline()),o.stroke()})),e.map={projection:a,graticule:n,context:o,context2:i}},e.state={isLoading:!1,isDrawing:!1},e.map=null,e.color=P.a(H.a),e.refMap=r.a.createRef(),e.refTrack=r.a.createRef(),e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("https://unpkg.com/world-atlas@1/world/110m.json").then((function(t){var a=t.data,n=Object(A.a)(a,a.objects.countries).features;e.generateMap(n)})).catch((function(e){console.log("err in fetch map data ",e.message)}))}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;if(e.satData!==this.props.satData){var r=this.props.observerData,s=r.observerLat,o=r.observerLong,i=r.duration,c=r.observerElevation,l=60*i[1];this.setState({isLoading:!0});var m=this.props.satData.map((function(e){var t=e.satid,a="".concat(w,"/").concat(t,"/").concat(s,"/").concat(o,"/").concat(c,"/").concat(l,"/&apiKey=").concat("4U5QZ4-4DH6BH-8EBRD3-4ID7");return v.a.get(a)}));v.a.all(m).then(v.a.spread((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.map((function(e){return e.data}))}))).then((function(e){(n.setState({isLoading:!1,isDrawing:!0}),t.isDrawing)?document.getElementsByClassName("hint")[0].innerHTML="Please wait for these satellite animation to finish before selection new ones!":n.track(e)})).catch((function(e){console.log("err in fetch satellite position -> ",e.message)}))}}},{key:"render",value:function(){var e=this.state.isLoading;return r.a.createElement("div",{className:"map-box"},e?r.a.createElement("div",{className:"spinner"},r.a.createElement(N.a,{tip:"Loading...",size:"large"})):null,r.a.createElement("canvas",{className:"map",ref:this.refMap}),r.a.createElement("canvas",{className:"track",ref:this.refTrack}),r.a.createElement("div",{className:"hint"}))}}]),a}(n.Component),F=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).showMap=function(t){e.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{satList:Object(g.a)(t)})}))},e.showNearbySatellite=function(t){e.setState({isLoadingList:!0,setting:t}),e.fetchSatellite(t)},e.fetchSatellite=function(t){var a=t.observerLat,n=t.observerLong,r=t.observerElevation,s=t.satAlt,o="".concat(E,"/").concat(a,"/").concat(n,"/").concat(r,"/").concat(s,"/").concat("52","&apiKey=").concat("4U5QZ4-4DH6BH-8EBRD3-4ID7");v.a.get(o).then((function(t){e.setState({satInfo:t.data,isLoadingList:!1})})).catch((function(e){console.log("fetch satellite failed -> ",e.message)}))},e.state={satInfo:null,satList:null,setting:null,isLoadingList:!1},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isLoadingList,a=e.satInfo,n=e.satList,s=e.setting;return r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"left-side"},r.a.createElement(y,{onShow:this.showNearbySatellite}),r.a.createElement(M,{isLoad:t,satInfo:a,onShowMap:this.showMap})),r.a.createElement("div",{className:"right-side"},r.a.createElement(W,{satData:n,observerData:s})))}}]),a}(n.Component),U=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer"},"\xa92020 StarLink Tracker. All Rights Reserved. Website Made by Hengyi")}}]),a}(n.Component);var J=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(F,null),r.a.createElement(U,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[143,1,2]]]);
//# sourceMappingURL=main.34baf73d.chunk.js.map